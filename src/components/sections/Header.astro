---
/**
 * Header Component - EXACT Replica of WordPress Original
 * Based on: kustomgarment.com original header
 * Using exact uicore classes and structure
 */

const { currentPath = '/' } = Astro.props;

// WhatsApp from environment
const whatsappNumber = import.meta.env.PUBLIC_WHATSAPP_NUMBER || '6285161202499';
const whatsappUrl = `https://wa.me/${whatsappNumber}`;

// Navigation items
const navItems = [
  { label: 'BUSINESS', href: '/business/' },
  { label: 'COMMUNITY', href: '/community/' },
  { label: 'CAMPUS', href: '/campus/' },
  { label: 'PERSONAL', href: '/personal/' },
];
---

<div
  data-uils="header"
  data-uils-title="Header"
  id="wrapper-navbar"
  itemscope
  itemtype="http://schema.org/WebSite"
  class="uicore uicore-navbar uicore-section uicore-box uicore-h-classic uicore-sticky ui-smart-sticky"
>
  <div class="uicore-header-wrapper">
    <nav class="uicore uicore-container">
      <!-- Logo -->
      <div class="uicore-branding" data-uils="header-branding" data-uils-title="Site Logo">
        <a href="/" rel="home">
          <img
            fetchpriority="high"
            class="uicore uicore-logo uicore-main"
            src="/images/logos/kg-logo.png"
            alt="Konveksi Satuan Surabaya Kustom Garment"
            width="1536"
            height="416"
          />
          <img
            class="uicore uicore-logo uicore-second"
            src="/images/logos/kg-logo.png"
            alt="Konveksi Satuan Surabaya Kustom Garment"
            width="1536"
            height="416"
          />
          <img
            class="uicore uicore-logo uicore-mobile-main"
            src="/images/logos/kg-logo.png"
            alt="Konveksi Satuan Surabaya Kustom Garment"
            width="1536"
            height="416"
          />
          <img
            loading="lazy"
            class="uicore uicore-logo uicore-mobile-second"
            src="/images/logos/kg-logo.png"
            alt="Konveksi Satuan Surabaya Kustom Garment"
            width="1536"
            height="416"
          />
        </a>
      </div>

      <!-- Navigation -->
      <div class="uicore-nav-menu">
        <div class="uicore-menu-container uicore-nav">
          <ul
            data-uils="header-menu"
            data-uils-title="Navigation Menu"
            class="uicore-menu"
          >
            {navItems.map((item) => (
              <li class="menu-item menu-item-type-post_type menu-item-object-page">
                <a href={item.href}>
                  <span class="ui-menu-item-wrapper">{item.label}</span>
                </a>
              </li>
            ))}
          </ul>
        </div>

        <!-- CTA Button -->
        <div class="uicore uicore-extra" data-uils="header_extra" data-uils-title="Header Extras">
          <div class="uicore-cta-wrapper">
            <a href={whatsappUrl} target="_blank" class="uicore-btn uicore-inverted">
              <span class="elementor-button-text">Hubungi Kami</span>
            </a>
          </div>
        </div>
      </div>

      <!-- Mobile Header Right -->
      <div class="uicore-mobile-head-right">
        <!-- Mobile CTA -->
        <div class="uicore-cta-wrapper">
          <a href={whatsappUrl} target="_blank" class="uicore-btn uicore-inverted">
            <span class="elementor-button-text">Hubungi Kami</span>
          </a>
        </div>

        <!-- Mobile Menu Toggle -->
        <button
          type="button"
          class="uicore-toggle uicore-ham"
          aria-label="mobile-menu"
          id="mobile-menu-toggle"
        >
          <span class="bars">
            <span class="bar"></span>
            <span class="bar"></span>
            <span class="bar"></span>
          </span>
        </button>
      </div>
    </nav>
  </div>
</div>

<!-- Mobile Menu Wrapper (uicore structure) -->
<div class="uicore-navigation-wrapper uicore-navbar uicore-section uicore-box uicore-mobile-menu-wrapper">
  <nav class="uicore uicore-container">
    <div class="uicore-branding uicore-mobile">
      <a href="/" rel="home">
        <img
          class="uicore uicore-logo uicore-mobile-main"
          src="/images/logos/kg-logo.png"
          alt="Konveksi Satuan Surabaya Kustom Garment"
          width="1536"
          height="416"
        />
        <img
          loading="lazy"
          class="uicore uicore-logo uicore-mobile-second"
          src="/images/logos/kg-logo.png"
          alt="Konveksi Satuan Surabaya Kustom Garment"
          width="1536"
          height="416"
        />
      </a>
    </div>
    <div class="uicore-menu-container uicore-nav">
      <ul class="uicore-menu">
        {navItems.map((item) => (
          <li class="menu-item menu-item-type-post_type menu-item-object-page">
            <a href={item.href}>
              <span class="ui-menu-item-wrapper">{item.label}</span>
            </a>
          </li>
        ))}
      </ul>
    </div>
    <div class="uicore uicore-extra" data-uils="header_extra" data-uils-title="Header Extras">
      <div class="uicore-cta-wrapper">
        <a href={whatsappUrl} target="_blank" class="uicore-btn uicore-inverted">
          <span class="elementor-button-text">Hubungi Kami</span>
        </a>
      </div>
    </div>
  </nav>
</div>

<link rel="stylesheet" href="/css/uicore.css" />

<script>
  // Mobile menu functionality - using uicore's structure
  const mobileToggle = document.getElementById('mobile-menu-toggle');
  const mobileMenuWrapper = document.querySelector('.uicore-navigation-wrapper');

  function toggleMenu() {
    mobileMenuWrapper?.classList.toggle('uicore-active');
    document.body.classList.toggle('uicore-mobile-menu-open');
    mobileToggle?.classList.toggle('uicore-active');
  }

  mobileToggle?.addEventListener('click', toggleMenu);

  // Close menu when clicking a link
  const mobileLinks = mobileMenuWrapper?.querySelectorAll('a');
  mobileLinks?.forEach((link) => {
    link.addEventListener('click', () => {
      mobileMenuWrapper?.classList.remove('uicore-active');
      document.body.classList.remove('uicore-mobile-menu-open');
      mobileToggle?.classList.remove('uicore-active');
    });
  });

  // Close menu on ESC key
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      mobileMenuWrapper?.classList.remove('uicore-active');
      document.body.classList.remove('uicore-mobile-menu-open');
      mobileToggle?.classList.remove('uicore-active');
    }
  });
</script>
